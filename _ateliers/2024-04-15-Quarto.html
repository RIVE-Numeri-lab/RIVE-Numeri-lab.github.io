---
layout: default
thumbnail: quarto.png
category: Stats
lang: fr
title: "Introduction à Quarto"
author: "Charles Martin"
date: "April 2024"
output:
  html_document:
    highlight: haddock
    keep_md: yes
    theme: readable
    toc: yes
    self_contained: true
---

<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="/assets/AtelierQuarto_files/libs/clipboard/clipboard.min.js"></script>
<script src="/assets/AtelierQuarto_files/libs/quarto-html/quarto.js"></script>
<script src="/assets/AtelierQuarto_files/libs/quarto-html/popper.min.js"></script>
<script src="/assets/AtelierQuarto_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="/assets/AtelierQuarto_files/libs/quarto-html/anchor.min.js"></script>
<link href="/assets/AtelierQuarto_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="/assets/AtelierQuarto_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="/assets/AtelierQuarto_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="/assets/AtelierQuarto_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="/assets/AtelierQuarto_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>


<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table des matières</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#fonctionnement" id="toc-fonctionnement" class="nav-link" data-scroll-target="#fonctionnement">Fonctionnement</a></li>
  <li><a href="#mise-en-forme-du-texte" id="toc-mise-en-forme-du-texte" class="nav-link" data-scroll-target="#mise-en-forme-du-texte">Mise en forme du texte</a></li>
  <li><a href="#tableaux" id="toc-tableaux" class="nav-link" data-scroll-target="#tableaux">Tableaux</a></li>
  <li><a href="#code-r" id="toc-code-r" class="nav-link" data-scroll-target="#code-r">Code R</a></li>
  <li><a href="#code-python" id="toc-code-python" class="nav-link" data-scroll-target="#code-python">Code Python</a></li>
  <li><a href="#figures" id="toc-figures" class="nav-link" data-scroll-target="#figures">Figures</a></li>
  <li><a href="#équations" id="toc-équations" class="nav-link" data-scroll-target="#équations">Équations</a></li>
  <li><a href="#liens-internes" id="toc-liens-internes" class="nav-link" data-scroll-target="#liens-internes">Liens internes</a></li>
  <li><a href="#notes-de-bas-de-page-et-encadrés" id="toc-notes-de-bas-de-page-et-encadrés" class="nav-link" data-scroll-target="#notes-de-bas-de-page-et-encadrés">Notes de bas de page et encadrés</a></li>
  <li><a href="#note-à-propos-de-lenvoi-des-fichiers-html-quarto" id="toc-note-à-propos-de-lenvoi-des-fichiers-html-quarto" class="nav-link" data-scroll-target="#note-à-propos-de-lenvoi-des-fichiers-html-quarto">Note à propos de l’envoi des fichiers HTML Quarto</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction à Quarto</h1>
<p class="subtitle lead">(anciennement RMarkdown)</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Auteur·rice</div>
    <div class="quarto-title-meta-contents">
             <p>Charles A. Martin </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Date de publication</div>
    <div class="quarto-title-meta-contents">
      <p class="date">15 avril 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>L’atelier d’aujourd’hui portera sur Quarto<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, le nouveau système de publication en libre accès publié par la compagnie Posit (anciennement RStudio).</p>
<p>Ce nouvel environnement est essentiellement une évolution de ce qui s’appelait autrefois RMarkdown. Mais puisque Posit a élargi ses horizons, Quarto peut maintenant s’utiliser autant pour créer des projets R que Python.</p>
<p>De façon succincte, Quarto permet de mélanger une panoplie de contenus dans un document (du texte, des équations, des images, du code, des graphiques, etc.) et ensuite de compiler tout cela en un seul document, soit HTML, PDF, etc. Le terme utilisé dans l’environnement Quarto pour cette compilation se nomme, très poétiquement, le tricotage (<em>knitting</em>).</p>
</section>
<section id="fonctionnement" class="level1">
<h1>Fonctionnement</h1>
<p>Bien qu’utilisable à l’extérieur de RStudio, Quarto est beaucoup plus simple d’utilisation à l’intérieur de celui-ci. Pour créer une fichier Quarto, il faut simplement cliquer le menu Fichier &gt; Nouveau Fichier &gt; Document Quarto. Cette séquence devrait vous ouvrir un fichier .qmd avec lequel vous êtes prêtes à travailler. À n’importe quel moment, vous pouvez <em>tricoter</em> votre fichier en cliquant le bouton Render, ou en utilisant le raccourci <code>Cmd+Shift+K</code>. Selon la configuration utilisée, votre document s’ouvrira dans une fenêtre externe ou dans l’onglet Aperçu de RStudio.</p>
</section>
<section id="mise-en-forme-du-texte" class="level1">
<h1>Mise en forme du texte</h1>
<p>La chose la plus commune que vous risquez de faire dans votre document Quarto est de mettre en forme du texte. Le langage utilisé pour se faire se nomme Markdown. Ce dernier est une langage assez rudimentaire, mais qui permet de faire de façon intuitive la majorité des mises en formes de base.</p>
<p>Tout d’abord, toutes les lignes précédées d’un # (hashtag/dièse) sont considérées comme des titres. On peut créer une hiérarchie de titres en mettant plusieurs dièses au début de chaque ligne. Par exemple :</p>
<pre><code># Titre
## Sous-titre
### Sous-sous-titre</code></pre>
<p>deviendra :</p>
</section>
<section id="titre" class="level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">Titre</h1>
<section id="sous-titre" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="sous-titre">Sous-titre</h2>
<section id="sous-sous-titre" class="level3 unnumbered unlisted">
<h3 class="unnumbered unlisted anchored" data-anchor-id="sous-sous-titre">Sous-sous-titre</h3>
<p>On peut aussi utiliser du gras et de l’italique avec les astérisques :</p>
<pre><code>Ce texte deviendras *gras*, celui-là en **italique**</code></pre>
<p>Ce texte deviendras <em>gras</em>, celui-là en <strong>italique</strong></p>
<p>On peut aussi mettre le texte en indice ou en exposant :</p>
<pre><code>I^2^ = x~2~</code></pre>
<p>I<sup>2</sup> = x<sub>2</sub></p>
<p>Il est aussi possible d’ajouter des liens, soit directement comme ceci :</p>
<pre><code>&lt;https://quarto.org/&gt;</code></pre>
<p><a href="https://quarto.org/" class="uri">https://quarto.org/</a></p>
<p>Ou sur un bout de texte, comme cela :</p>
<pre><code>Le [site web de Quarto](https://quarto.org/) est très intéressant.</code></pre>
<p>Le <a href="https://quarto.org/">site web de Quarto</a> est très intéressant.</p>
<p>On peut, évidemment, aussi faire des listes à puces, comme ceci :</p>
<pre><code>* A
  * B
    * C
* D</code></pre>
<ul>
<li>A
<ul>
<li>B
<ul>
<li>C</li>
</ul></li>
</ul></li>
<li>D</li>
</ul>
<p>Et des listes numérotées, comme cela :</p>
<pre><code>1. A
2. B
3. C</code></pre>
<ol type="1">
<li>A</li>
<li>B</li>
<li>C</li>
</ol>
</section>
</section>
</section>
<section id="tableaux" class="level1">
<h1>Tableaux</h1>
<p>On peut aussi créer des tableaux :</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>| fruit  | price  |</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>|--------|--------|</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>| apple  | 2.05   |</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>| pear   | 1.37   |</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>| orange | 3.09   |</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>devient</p>
<table class="table">
<thead>
<tr class="header">
<th>fruit</th>
<th>price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>apple</td>
<td>2.05</td>
</tr>
<tr class="even">
<td>pear</td>
<td>1.37</td>
</tr>
<tr class="odd">
<td>orange</td>
<td>3.09</td>
</tr>
</tbody>
</table>
<p>Et avec les “:”, contrôler l’alignement dans les cellules :</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>| gauche  | centré  | droite |</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>|:--------|:-------:|-------:|</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>| 1.99    | 1.99    | 1.99   |</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>| 10.99   | 10.99   | 10.99  |</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">gauche</th>
<th style="text-align: center;">centré</th>
<th style="text-align: right;">droite</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1.99</td>
<td style="text-align: center;">1.99</td>
<td style="text-align: right;">1.99</td>
</tr>
<tr class="even">
<td style="text-align: left;">10.99</td>
<td style="text-align: center;">10.99</td>
<td style="text-align: right;">10.99</td>
</tr>
</tbody>
</table>
</section>
<section id="code-r" class="level1">
<h1>Code R</h1>
<p>On peut ajouter du code R n’importe où à travers notre document, en utilisant ces balises :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.3.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(sleep_total)) <span class="sc">+</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="/assets/AtelierQuarto_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Si vous ne voulez pas encombrer votre code avec les messages, vous pouvez les cacher en changeant les options du bloc de code :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning : FALSE</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| message : FALSE</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(sleep_total)) <span class="sc">+</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="/assets/AtelierQuarto_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Votre code R, plutôt que d’être dans un bloc, peut aussi s’intégrer à votre paragraphe de texte. Par exemple, si vous écrivez ceci :</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Notre tableau de données compte `r length(unique(msleep$vore))` types d'alimentation différents.</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Vous obtiendrez cela :</p>
<p>Notre tableau de données compte 5 types d’alimentation différents.</p>
<p>Remarquez que le code est exécuté en séquence. Les librairies chargées et les objets créés sont disponibles dans le reste du document.</p>
<p>Le code R générant des tableaux sera mis en forme comme les tableaux manuels vu ci-haut, pour autant que l’on passe le tableau de données à la fonction <code>kable</code> de la librairie <code>kableExtra</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, vore, bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  kable</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">vore</th>
<th style="text-align: right;">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Cheetah</td>
<td style="text-align: left;">carni</td>
<td style="text-align: right;">50.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Owl monkey</td>
<td style="text-align: left;">omni</td>
<td style="text-align: right;">0.480</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mountain beaver</td>
<td style="text-align: left;">herbi</td>
<td style="text-align: right;">1.350</td>
</tr>
<tr class="even">
<td style="text-align: left;">Greater short-tailed shrew</td>
<td style="text-align: left;">omni</td>
<td style="text-align: right;">0.019</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cow</td>
<td style="text-align: left;">herbi</td>
<td style="text-align: right;">600.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="code-python" class="level1">
<h1>Code Python</h1>
<p>Tout ce que nous venons de voir est également vrai pour le code Python, pour autant que Python et RStudio soient configurés correctement.</p>
<p>Par exemple :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>especes <span class="op">=</span> [<span class="st">'A'</span>,<span class="st">'B'</span>,<span class="st">'C'</span>]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>especes[<span class="dv">2</span>] <span class="op">=</span> <span class="st">'D'</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(especes)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['A', 'B', 'D']</code></pre>
</div>
</div>
<p>Les graphiques sortiront aussi proprement avec Python :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>iris <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/mwaskom/seaborn-data/master/iris.csv'</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>plt.hist(<span class="st">'sepal_length'</span>, data <span class="op">=</span> iris)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="/assets/AtelierQuarto_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="614"></p>
</div>
</div>
</section>
<section id="figures" class="level1">
<h1>Figures</h1>
<p>Il peut parfois vous arriver que les images que vous voulez afficher ne soient pas créées par un bout de code, mais trainent plutôt sur votre ordinateur, par exemple, une photo de chat :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="chat.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Une photo de mon chat</figcaption>
</figure>
</div>
<p>Pour insérer une image avec sa légende, il suffit d’utiliser le code en deux parties suivant :</p>
<p><code>![Une photo de mon chat](chat.jpg)</code></p>
<p>Entre les parenthèses carrées, on retrouve la légende, et entre les vraies parenthèses, le nom de l’image.</p>
<p>Si vous voulez que vos légendes soient constantes entre vos figures mêmes si certaines sont produites par programmation, vous pouvez aussi ajouter une légende aux graphiques créés par programmation, comme cela :</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>```{r}</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>#| message : FALSE </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>#| echo : FALSE </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>#| fig-cap : "Temps de sommeil des autres animaux qui ne sont pas mon chat"</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>ggplot(msleep, aes(sleep_total)) + </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  geom_histogram()</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>```</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/assets/AtelierQuarto_files/figure-html/unnamed-chunk-10-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Temps de sommeil des autres animaux qui ne sont pas mon chat</figcaption>
</figure>
</div>
</div>
</div>
<p>Ici, l’option <code>echo : FALSE</code> permet de cacher le code et de n’afficher que le graphique directement.</p>
</section>
<section id="équations" class="level1">
<h1>Équations</h1>
<p>Comme les documents Quarto sont souvent très techniques, les auteurs ont prévu une façon simple d’insérer des équations mathématiques, en utilisant le langage Latex.</p>
<p>Pour insérer une formule à l’intérieur d’un bloc de texte (on parle alors de formule <em>inline</em>), on entoure notre équation de signes de dollars. Ceci <code>$E=mc^2$</code> devient par exemple cela <span class="math inline">\(E=mc^2\)</span>.</p>
<p>Si on veut que notre équation soit par elle-même sur une ligne, il faut alors l’entourer de doubles signes de dollars. <code>$$y=ax+b$$</code> devient <span class="math display">\[y=ax+b\]</span></p>
<p>Outre les éléments intuitifs comme =, +, -, etc., le langage contient toute une série de caractères spéciaux, incluant entre autres les lettres grecques, majuscules ou minuscules. On peut appeler des caractères spéciaux Latex grâce au <code>\</code>. Par exemple, ce code Latex <code>$\alpha,\beta,\Gamma,\pi$</code> devient <span class="math inline">\(\alpha,\beta,\Gamma,\pi\)</span>.</p>
<p>Il existe toute une série de codes concernant des structures mathématiques particulières, entre autre les exposants et les indices :</p>
<p>Par exemple, <code>$$y_i=\beta_0+\beta_1 x_1+\beta_2 x_1^2+\epsilon_i$$</code> devient</p>
<p><span class="math display">\[y_i=\beta_0+\beta_1 x_1+\beta_2 x_1^2+\epsilon_i\]</span></p>
<p>Si jamais vous avez plus d’un élément à mettre en indices, il faut entourer votre série d’éléments avec des accolades. Par exemple, la séquence <code>$2^{1+x_{i,j}}$</code> devient <span class="math inline">\(2^{1+x_{i,j}}\)</span>.</p>
<p>Remarquez que malheureusement, la syntaxe pour les indices et les exposants est différente, selon que vous écrivez du texte (en Markdown) ou des équations (en Latex).</p>
<p>Vous avez aussi accès aux sommes, aux intégrales, aux produits, etc</p>
<p><code>$$\sum_{i=1}^{10} t_i$$</code> <span class="math display">\[\sum_{i=1}^{10} t_i\]</span></p>
<p><code>$$\int_0^\infty e^{-x}$$</code> <span class="math display">\[\int_0^\infty e^{-x}\]</span></p>
<p><code>$$\prod_{i=1}^\infty a_i$$</code> <span class="math display">\[\prod_{i=1}^\infty a_i\]</span></p>
<p>Enfin, vous pouvez aussi définir des racines carrées et des fractions, comme ceci :</p>
<p><code>$$x=(\frac{\sqrt{y+2}}{z})$$</code></p>
<p><span class="math display">\[x=(\frac{\sqrt{y+2}}{z})\]</span></p>
<p>Remarquez que par défaut, Latex présente les parenthèses de la même taille que le texte. Vous pouvez cependant <em>demander</em> de les faire ajustables, pour que peu importe la taille du contenu, les parenthèses soient visuellement appropriées.</p>
<p>Pour se faire, vous devez précéder la parenthèse de gauche du code spécial <code>\left</code> et celle de droite… de <code>\right</code>. L’équation précédente sera beaucoup agréable à lire si elle est donc créée comme ceci :</p>
<p><code>$$x=\left(\frac{\sqrt{y+2}}{z}\right)$$</code></p>
<p><span class="math display">\[x=\left(\frac{\sqrt{y+2}}{z}\right)\]</span></p>
<p>Évidemment, cet atelier n’est pas dédié entièrement au Latex. C’est pourquoi je vous conseille de consulter une resource externe si jamais vous avez besoin de notation plus avancée<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
</section>
<section id="liens-internes" class="level1">
<h1>Liens internes</h1>
<p>Si on veut que notre équation soit numérotée et référençable, il faut lui assigner une étiquette immédiatement après sa création. Par exemple <code>$$c=\sqrt{a^2+b^2}$${#eq-hypothenuse}</code> devient : <span id="eq-hypothenuse"><span class="math display">\[c=\sqrt{a^2+b^2} \tag{1}\]</span></span></p>
<p>Remarquez que pour que Quarto considère votre étiquette comme une équation, son nom doit commencer par <code>eq-</code>.</p>
<p>Par la suite, on peut avec une mention <code>@eq-hypothenuse</code> y faire référence n’importe où dans le texte (<a href="#eq-hypothenuse">Équation&nbsp;1</a>), même au-dessus de sa définition.</p>
<p>Ce mécanisme fonctionne aussi pour les figures. On peut par exemple citer une figure avec <code>@fig-exemple</code> (qui devient : <a href="#fig-exemple">Figure&nbsp;1</a>), et la créer plus loin dans notre document :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: FALSE</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exemple</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Titre de la figure référencée"</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(sleep_total)) <span class="sc">+</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-exemple" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="/assets/AtelierQuarto_files/figure-html/fig-exemple-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Titre de la figure référencée</figcaption>
</figure>
</div>
</div>
</div>
<p>À ce moment-là, l’étiquette (<em>label</em>) de la figure doit être mentionné dans les options du bloc de code.</p>
<p>Comme vous l’avez peut-être remarqué plus haut, les références sont faites avec des termes anglais, qui commencent par des majuscules, par exemple “Equation 1”. Cette terminologie peut être changée dans les options globales du fichier, par exemple comme ceci pour changer l’étiquette donnée aux équations et aux figures :</p>
<pre><code>---
title: "Titre du document"
crossref:
  eq-prefix: Éq.
  fig-prefix: Fig.
---</code></pre>
<p>Vous pouvez aussi profiter du travail de traduction fait en amont par l’équipe de Quarto, en changeant simplement la langue du document en entier :</p>
<pre><code>---
title: "Titre du document"
lang: fr
---</code></pre>
<p>On peut aussi modifier la référence directement au moment de l’insérer, en l’encadrant par des parenthèses carrées. Par exemple, <code>[Formule @eq-hypothenuse]</code> devient <a href="#eq-hypothenuse">Formule&nbsp;1</a></p>
<p>Ces références peuvent aussi être utilisées avec des tableaux, peu importe qu’ils soient créés manuellement ou par programmation :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Liste des mammifères</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-mams</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, vore, bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  kable</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="tbl-mams" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;1: Liste des mammifères</caption>
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">vore</th>
<th style="text-align: right;">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Cheetah</td>
<td style="text-align: left;">carni</td>
<td style="text-align: right;">50.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Owl monkey</td>
<td style="text-align: left;">omni</td>
<td style="text-align: right;">0.480</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mountain beaver</td>
<td style="text-align: left;">herbi</td>
<td style="text-align: right;">1.350</td>
</tr>
<tr class="even">
<td style="text-align: left;">Greater short-tailed shrew</td>
<td style="text-align: left;">omni</td>
<td style="text-align: right;">0.019</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cow</td>
<td style="text-align: left;">herbi</td>
<td style="text-align: right;">600.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Je peux maintenant faire référence au <a href="#tbl-mams">Tableau&nbsp;1</a> dans mon texte avec la mention <code>[Tableau @tbl-mams]</code>.</p>
<p>Remarquez qu’il faudrait changer l’option globale <code>tbl-prefix</code> pour “Tableau” si on veut que la mention au haut du tableau soit aussi correcte.</p>
</section>
<section id="notes-de-bas-de-page-et-encadrés" class="level1 page-columns page-full">
<h1>Notes de bas de page et encadrés</h1>
<p>On peut aussi ajouter des notes de base de page à notre document Quarto. Pour ce faire, il suffit d’insérer une mention <code>[^lanote]</code>, et ensuite de définir son contenu quelque part. Par exemple, ce bout de texte :</p>
<pre><code>J'insère ma note ici[^lanote], et je la définis plus bas

[^lanote]: Ici je définis ma note</code></pre>
<p>Sera transformé comme cela :</p>
<p>J’insère ma note ici<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, et je la définis plus bas</p>
<p>La note peut même contenu plusieurs paragraphes, pour autant que chacun d’entre eux soit indenté avec au moins 2 <code>tab</code> ou 4 espaces.</p>
<p>Par exemple</p>
<pre><code>Lien vers la longue[^longuenote] note.

[^longuenote]: Deviendra cela.

    Même si j'ai besoin de plusieurs paragraphes pour y arriver.</code></pre>
<p>Lien vers la longue<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> note.</p>
<p>On peut aussi créer de encadrés, en créant manuellement une cellule Quarto à l’aide des <code>:::</code> et en choisissant le type d’encadré, par exemple un avertissement :</p>
<pre><code>::: {.callout-warning}
Le contenu important de l'avertissement
:::</code></pre>
<p>devient</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Avertissement
</div>
</div>
<div class="callout-body-container callout-body">
<p>Le contenu important de l’avertissement</p>
</div>
</div>
<p>Il existe plusieurs autre types :</p>
<ul>
<li>note</li>
<li>important</li>
<li>tip</li>
<li>caution</li>
</ul>
<p>Ces boîtes peuvent être aussi déplacées dans la marge en ajoutant l’option <code>.column-margin</code> à la cellule.</p>
<p>Par exemple, cette note ira se placer à droite :</p>
<pre><code>::: {.column-margin .callout-note}
Le contenu important de la note
:::</code></pre>

<div class="no-row-height column-margin column-container"><div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Le contenu important de la note</p>
</div>
</div></div><p>Et en fait, n’importe quel contenu peut être placé dans la marge de droite, même du code R :</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: margin</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(bodywt, brainwt)) <span class="sc">+</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>()</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 27 rows containing missing values (`geom_point()`).</code></pre>
</div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="/assets/AtelierQuarto_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div></div></div>
</section>
<section id="note-à-propos-de-lenvoi-des-fichiers-html-quarto" class="level1">
<h1>Note à propos de l’envoi des fichiers HTML Quarto</h1>
<p>Vous avez peut-être remarqué qu’au moment de <strong>tricoter</strong> votre fichier HMTL, Quarto crée aussi des dossiers contenant les figures R, des librairies de javascript etc. Ces dossiers doivent toujours accompagner le document HTML si vous voulez que ce dernier s’affiche correctement.</p>
<p>Si cette façon de faire ne vous plaît pas, vous pouvez modifier activer l’option <code>embed-resources</code>. Celle-ci indiquera à Quarto d’intégrer toute l’information, même le contenu des images, à l’intérieur d’un seul fichier HTML. Ce dernier deviendra plus lourd, mais pourra être transféré directement.</p>
<pre><code>---
format:
  html:
    embed-resources: true
---</code></pre>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Ceci termine notre petit survol des capacité du système Quarto développé par Posit. Comme vous le constatez, il s’agit d’un système à la fois simple et extrêmement puissant pour communiquer les résultats de vos analyses.</p>
<p>Si jamais vous voulez pousser l’aventure plus loin, Quarto peut-être aussi utilisé, entre autres, pour publier facilement des <a href="https://quarto.org/docs/books/">livres</a> et des <a href="https://quarto.org/docs/websites/website-blog.html">blogues</a>.</p>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p><a href="https://quarto.org/" class="uri">https://quarto.org/</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="https://en.wikibooks.org/wiki/LaTeX/Mathematics" class="uri">https://en.wikibooks.org/wiki/LaTeX/Mathematics</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Ici je définis ma note<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Deviendra cela.</p>
<p>Même si j’ai besoin de plusieurs paragraphes pour y arriver.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
